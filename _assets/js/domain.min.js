(async()=>{var TldArray=["id","com","net","info","org","biz","name","co","in","us"];let domains=[];var results;domainsFetch=await fetch("https://cdn.statically.io/gh/faridnizam/mirror-tld/master/output/tlds-alpha-by-domain.txt"),domainsFetch=await domainsFetch.text(),domains=domainsFetch.trim().split("\n"),domainsFetch=null,domains.shift().substring(2),document.getElementById("results").innerHTML="",document.getElementById("input").addEventListener("submit",async event=>{event.preventDefault();let check=[];var results=document.getElementById("results");results.innerHTML="";var nameSearch=document.getElementById("name").value.trim();if(nameSearch<1)results.innerHTML="";else{nameSearch=(nameSearch=punycode.toASCII(nameSearch)).toUpperCase();var prefix="";if(nameSearch.indexOf(".")>-1&&1!=nameSearch.endsWith(".")){var split=nameSearch.split(".");for(const domain of domains)if(domain.startsWith(split[split.length-1])){prefix="";for(var i=0;i<split.length-1;i++)prefix+=split[i],i!=split.length-2&&(prefix+=".");check.push(domain)}}else for(const domain of domains)if(nameSearch.endsWith(domain)&&nameSearch!=domain){var split=nameSearch.split(domain);prefix=split[0],check.push(domain)}if(!(check.lnegth<1)){prefix=prefix.toLowerCase(),prefix=punycode.toASCII(prefix);for(const domain of check)fetch(`https://cloudflare-dns.com/dns-query?type=SOA&name=${prefix}.${domain}.`,{headers:{Accept:"application/dns-json"}}).then(response=>response.json()).then(response=>{let status=!1;response.Answer&&(status=response.Answer.some(record=>6===record.type)),prefix=prefix.toLowerCase(),prefix=punycode.toUnicode(prefix);var extension=domain.toLowerCase(),className=status?"domain-taken":"domain-free",targetBlank=status?'target="_blank"':"",linkRel=status?'rel="noopener noreferrer"':"";results.innerHTML+='<a id="'+extension+'" class="domain '+className+'" href="'+(status?"https://"+prefix+"."+extension:"#")+'" '+targetBlank+linkRel+">"+prefix+"."+extension+"</a>"}).catch(error=>console.log(domain,error))}}})})();